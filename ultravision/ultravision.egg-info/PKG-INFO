Metadata-Version: 2.4
Name: ultravision
Version: 0.1.0
Summary: Ultra-fast LM Studio + Qwen3-VL batch image processor with concurrency, resume, and rich outputs.
Author-email: Your Name <you@example.com>
License: MIT
Keywords: LM Studio,Qwen,Vision,Batch,OpenAI-compatible,CLI
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: requests>=2.31.0
Requires-Dist: tqdm>=4.66.0
Requires-Dist: rich>=13.7.0
Requires-Dist: Pillow>=10.0.0
Requires-Dist: fastapi>=0.115.0
Requires-Dist: uvicorn[standard]>=0.23.0
Requires-Dist: python-multipart>=0.0.7
Provides-Extra: dev
Requires-Dist: pytest>=7.4; extra == "dev"
Dynamic: license-file

# UltraVision

UltraVision is a ðŸ‘‰ fast, resilient batch image processor that pairs LM Studio (or any OpenAI-compatible vision model) with a CLI + web companion. Run it locally to describe folders of images, resume interrupted runs, deduplicate by hash, or spin up a browser-based studio for drag-and-drop uploads.

## Getting started

1. **Install the package**
   ```bash
   pip install .
   ```
   (Or build a wheel via `python -m build` and `pip install ./dist/ultravision-*.whl`.)

2. **Start LM Studio** (default `http://localhost:1234`) with `qwen/qwen3-vl-8b` or another vision-enabled model.

3. **Run UltraVision**
   ```bash
   ultravision ./images --model qwen/qwen3-vl-8b --format jsonl --out results.jsonl
   ```

UltraVision autodetects common image extensions, batches requests, retries failures with backoff, and writes the outputs in the format you choose.

## Command-line highlights

- **Batching & resuming:** `--per-request`, `--limit`, `--recursive`, `--patterns`, and `--concurrency` tune how images are grouped. `--resume` plus `--format jsonl` loads previously written SHA-256 hashes to skip duplicates.
- **Outputs:** Supported formats are `jsonl`, `json`, `text`, `markdown`, or `csv`; the CLI defaults to `outputs.<format>`.
- **Prompt control:** Customize `--system-prompt`, `--prompt`, temperature, `--max-tokens`, and inject arbitrary JSON with `--extra` (e.g., `{"top_p":0.9}`).
- **Image hygiene:** Add `--autorotate` and `--max-side` (Pillow) to normalize EXIF orientation and limit the largest dimension before uploading.
- **Failure visibility:** Colored logging via `rich` (when available) plus `--fail-log` captures batches that exhaust retries.

Example workflows:

```bash
ultravision ./images --per-request 2 --concurrency 4 --autorotate --max-side 1600
ultravision ./images --resume --format markdown --out summary.md
ultravision ./images --format csv --out spreadsheet.csv
```

Run `ultravision --help` to explore every flag documented in `docs/cli.md`.

## Web studio

FastAPI backs the browser UI:

```bash
pip install .
uvicorn ultravision.web.server:app --reload
```

Open [http://localhost:8000](http://localhost:8000), drag images into the page, and point the settings at your LM Studio endpoint. The server reuses the same helpers as the CLI so metadata, prompts, and output extraction stay consistent.

## Development & docs

- Source layout: CLI (`ultravision/cli.py`), writers, API helpers, `images`, `util`, and the FastAPI server.
- Docstrings follow the Google style guide; keep docs in sync by updating the relevant `docs/*.md` files (`cli.md`, `overview.md`, `development.md`, etc.).
- Run `rg` to search across the repo and `pytest` to guard regressions; refer to `docs/development.md` for the project workflow.

## Testing

```bash
pip install -e ".[dev]"
pytest
```

The suite covers image helpers, writer formats/resume behavior, CLI batching/dedup logic, and utility helpers like backoff/thread pools.

## License

MIT
